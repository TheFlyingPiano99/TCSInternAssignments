openapi: 3.0.0
info:
  title: TCS Interview API
  version: 0.0.1

paths:
#-----------------------------------------------------------------------
# <Accessing users>
  /user:
    get:
      security:
        - authcodeWithPKCE: [admin]
      tags:
        - users
      description: Retrieve multiple objects
      responses:
        200:
          description: The array of objects is returned in content
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'  
        500:
          $ref: '#/components/responses/500APIError'
    post:
      tags:
        - users
      security:
        - authcodeWithPKCE: [admin]
      description: Create a new object
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserNoId'
      responses:
        201:
          description: User created sucessfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        400:
          $ref: '#/components/responses/400BadRequest'
        500:
          $ref: '#/components/responses/500APIError'
  /user/{userId}:
    get:
      security:
        - authcodeWithPKCE: [admin]
      
      tags:
        - users
      description: Retrieve a specific object
      parameters:
        - $ref: '#/components/parameters/UserId'
      responses:
        200:
          description: The object is returned in content
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'
    patch:
      tags:
        - users
      security:
        - authcodeWithPKCE: [admin]
      description: Update the properties of the object with the provided ID
      parameters:
        - $ref: '#/components/parameters/UserId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserNoId'
      responses:
        200:
          description: Object was updated successfully. The updated verion is returned in content.
          content:
            application/json:
              schema:
                description: The newly updated object
                $ref: '#/components/schemas/User'
        400:
          $ref: '#/components/responses/400BadRequest'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      
    delete:
      tags:
        - users
      security:
        - authcodeWithPKCE: [admin]
      description: Delete an object with the provided ID
      parameters:
        - $ref: '#/components/parameters/UserId'
      responses:
        200:
          description: Object deleted sucessfully. The deleted object is returned in content.
          content:
            application/json:
              schema:
                description: The deleted object
                $ref: '#/components/schemas/User'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      

#-----------------------------------------------------------------------
# <Accessing roles>
  /role:
    get:
      security:
        - authcodeWithPKCE: [admin]
      tags:
        - roles
      description: Retrieve multiple objects
      responses:
        200:
          description: The array of objects is returned in content
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Role'  
        500:
          $ref: '#/components/responses/500APIError'
    post:
      tags:
        - roles
      security:
        - authcodeWithPKCE: [admin]
      description: Create a new object
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoleNoId'
            
      responses:
        201:
          description: User created sucessfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Role'
        400:
          $ref: '#/components/responses/400BadRequest'
        500:
          $ref: '#/components/responses/500APIError'      
  /role/{roleId}:
    get:
      security:
        - authcodeWithPKCE: [admin]
      
      tags:
        - roles
      description: Retrieve a specific object
      parameters:
        - $ref: '#/components/parameters/RoleId'
      responses:
        200:
          description: The object is returned in content
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Role'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      
    patch:
      tags:
        - roles
      security:
        - authcodeWithPKCE: [admin]
      description: Update the properties of the object with the provided ID
      parameters:
        - $ref: '#/components/parameters/RoleId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoleNoId'
      responses:
        200:
          description: Object was updated successfully. The updated verion is returned in content.
          content:
            application/json:
              schema:
                description: The newly updated object
                $ref: '#/components/schemas/Role'
        400:
          $ref: '#/components/responses/400BadRequest'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      
    delete:
      tags:
        - roles
      security:
        - authcodeWithPKCE: [admin]
      description: Delete an object with the provided ID
      parameters:
        - $ref: '#/components/parameters/RoleId'
      responses:
        200:
          description: Object deleted sucessfully. The deleted object is returned in content.
          content:
            application/json:
              schema:
                description: The deleted object
                $ref: '#/components/schemas/Role'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      

#-----------------------------------------------------------------------
# <Accessing projects>
  /project:
    get:
      security:
        - authcodeWithPKCE: [admin]
      tags:
        - projects
      description: Retrieve multiple objects
      responses:
        200:
          description: The array of objects is returned in content
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Project'  
        500:
          $ref: '#/components/responses/500APIError'
    post:
      tags:
        - projects
      security:
        - authcodeWithPKCE: [admin]
      description: Create a new object
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectNoId'
      responses:
        201:
          description: User created sucessfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        400:
          $ref: '#/components/responses/400BadRequest'
        500:
          $ref: '#/components/responses/500APIError'      
  /project/{projectId}:
    get:
      security:
        - authcodeWithPKCE: [admin]
      
      tags:
        - projects
      description: Retrieve a specific object
      parameters:
        - $ref: '#/components/parameters/ProjectId'
      responses:
        200:
          description: The object is returned in content
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      
    patch:
      tags:
        - projects
      security:
        - authcodeWithPKCE: [admin]
      description: Update the properties of the object with the provided ID
      parameters:
        - $ref: '#/components/parameters/ProjectId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectNoId'
      responses:
        200:
          description: Object was updated successfully. The updated verion is returned in content.
          content:
            application/json:
              schema:
                description: The newly updated object
                $ref: '#/components/schemas/Project'
        400:
          $ref: '#/components/responses/400BadRequest'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      
    delete:
      tags:
        - projects
      security:
        - authcodeWithPKCE: [admin]
      description: Delete an object with the provided ID
      parameters:
        - $ref: '#/components/parameters/ProjectId'
      responses:
        200:
          description: Object deleted sucessfully. The deleted object is returned in content.
          content:
            application/json:
              schema:
                description: The deleted object
                $ref: '#/components/schemas/Project'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      

#-----------------------------------------------------------------------
# <Accessing positions>
  /position:
    get:
      security:
        - authcodeWithPKCE: [recruiter]
      tags:
        - positions
      description: Retrieve multiple objects
      responses:
        200:
          description: The array of objects is returned in content
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Position'  
        500:
          $ref: '#/components/responses/500APIError'
    post:
      tags:
        - positions
      security:
        - authcodeWithPKCE: [admin]
      description: Create a new object
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PositionNoId'  
      responses:
        201:
          description: User created sucessfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Position'
        400:
          $ref: '#/components/responses/400BadRequest'
        500:
          $ref: '#/components/responses/500APIError'      
  /position/{positionId}:
    get:
      security:
        - authcodeWithPKCE: [admin]
      
      tags:
        - positions
      description: Retrieve a specific object
      parameters:
        - $ref: '#/components/parameters/PositionId'
      responses:
        200:
          description: The object is returned in content
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Position'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      
    patch:
      tags:
        - positions
      security:
        - authcodeWithPKCE: [admin]
      description: Update the properties of the object with the provided ID
      parameters:
        - $ref: '#/components/parameters/PositionId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PositionNoId'
      responses:
        200:
          description: Object was updated successfully. The updated verion is returned in content.
          content:
            application/json:
              schema:
                description: The newly updated object
                $ref: '#/components/schemas/Position'
        400:
          $ref: '#/components/responses/400BadRequest'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      
    delete:
      tags:
        - positions
      security:
        - authcodeWithPKCE: [admin]
      description: Delete an object with the provided ID
      parameters:
        - $ref: '#/components/parameters/PositionId'
      responses:
        200:
          description: Object deleted sucessfully. The deleted object is returned in content.
          content:
            application/json:
              schema:
                description: The deleted object
                $ref: '#/components/schemas/Position'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      

#---------------------------------------------------------------------------------
# <Accessing candidates>
  /candidate:
    get:
      security:
        - authcodeWithPKCE: [admin]
        - authcodeWithPKCE: [recruiter]
      tags:
        - candidates
      description: Retrieve multiple objects
      responses:
        200:
          description: The array of objects is returned in content
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Candidate'  
        500:
          $ref: '#/components/responses/500APIError'
    post:
      tags:
        - candidates
      security:
        - authcodeWithPKCE: [admin]
      description: Create a new object
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CandidateNoId'
            
      responses:
        201:
          description: User created sucessfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Candidate'
        400:
          $ref: '#/components/responses/400BadRequest'
        500:
          $ref: '#/components/responses/500APIError'      
  /candidate/{candidateId}:
    get:
      security:
        - authcodeWithPKCE: [admin]
      
      tags:
        - candidates
      description: Retrieve a specific object
      parameters:
        - $ref: '#/components/parameters/CandidateId'
      responses:
        200:
          description: The object is returned in content
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Candidate'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      
    patch:
      tags:
        - candidates
      security:
        - authcodeWithPKCE: [admin]
      description: Update the properties of the object with the provided ID
      parameters:
        - $ref: '#/components/parameters/CandidateId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CandidateNoId'
      responses:
        200:
          description: Object was updated successfully. The updated verion is returned in content.
          content:
            application/json:
              schema:
                description: The newly updated object
                $ref: '#/components/schemas/Candidate'
        400:
          $ref: '#/components/responses/400BadRequest'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      
    delete:
      tags:
        - candidates
      security:
        - authcodeWithPKCE: [admin]
      description: Delete an object with the provided ID
      parameters:
        - $ref: '#/components/parameters/CandidateId'
      responses:
        200:
          description: Object deleted sucessfully. The deleted object is returned in content.
          content:
            application/json:
              schema:
                description: The deleted object
                $ref: '#/components/schemas/Candidate'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      

#---------------------------------------------------------------------------------
# <Accessing technical interview>
  /technical:
    get:
      security:
        - authcodeWithPKCE: [admin]
        - authcodeWithPKCE: [recruiter]
      tags:
        - technical interview
      description: Retrieve multiple objects
      responses:
        200:
          description: The array of objects is returned in content
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TechnicalInterview'  
        500:
          $ref: '#/components/responses/500APIError'
    post:
      tags:
        - technical interview
      security:
        - authcodeWithPKCE: [admin]
      description: Create a new object
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TechnicalInterviewNoId'
            
      responses:
        201:
          description: User created sucessfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TechnicalInterview'
        400:
          $ref: '#/components/responses/400BadRequest'
        500:
          $ref: '#/components/responses/500APIError'      
  /technical/{technicalId}:
    get:
      security:
        - authcodeWithPKCE: [admin]
      
      tags:
        - technical interview
      description: Retrieve a specific object
      parameters:
        - $ref: '#/components/parameters/TechnicalId'
      responses:
        200:
          description: The object is returned in content
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TechnicalInterview'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      
    patch:
      tags:
        - technical interview
      security:
        - authcodeWithPKCE: [admin]
      description: Update the properties of the object with the provided ID
      parameters:
        - $ref: '#/components/parameters/TechnicalId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TechnicalInterviewNoId'
      responses:
        200:
          description: Object was updated successfully. The updated verion is returned in content.
          content:
            application/json:
              schema:
                description: The newly updated object
                $ref: '#/components/schemas/TechnicalInterview'
        400:
          $ref: '#/components/responses/400BadRequest'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      
    delete:
      tags:
        - technical interview
      security:
        - authcodeWithPKCE: [admin]
      description: Delete an object with the provided ID
      parameters:
        - $ref: '#/components/parameters/TechnicalId'
      responses:
        200:
          description: Object deleted sucessfully. The deleted object is returned in content.
          content:
            application/json:
              schema:
                description: The deleted object
                $ref: '#/components/schemas/TechnicalInterview'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'


#---------------------------------------------------------------------------------
# <Accessing management interview>
  /management:
    get:
      security:
        - authcodeWithPKCE: [admin]
        - authcodeWithPKCE: [recruiter]
      tags:
        - management interview
      description: Retrieve multiple objects
      responses:
        200:
          description: The array of objects is returned in content
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ManagementInterview'  
        500:
          $ref: '#/components/responses/500APIError'
    post:
      tags:
        - management interview
      security:
        - authcodeWithPKCE: [admin]
      description: Create a new object
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ManagementInterviewNoId'
            
      responses:
        201:
          description: User created sucessfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ManagementInterview'
        400:
          $ref: '#/components/responses/400BadRequest'
        500:
          $ref: '#/components/responses/500APIError'      
  /management/{managementId}:
    get:
      security:
        - authcodeWithPKCE: [admin]
      
      tags:
        - management interview
      description: Retrieve a specific object
      parameters:
        - $ref: '#/components/parameters/ManagementId'
      responses:
        200:
          description: The object is returned in content
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ManagementInterview'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      
    patch:
      tags:
        - management interview
      security:
        - authcodeWithPKCE: [admin]
      description: Update the properties of the object with the provided ID
      parameters:
        - $ref: '#/components/parameters/ManagementId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ManagementInterviewNoId'
      responses:
        200:
          description: Object was updated successfully. The updated verion is returned in content.
          content:
            application/json:
              schema:
                description: The newly updated object
                $ref: '#/components/schemas/ManagementInterview'
        400:
          $ref: '#/components/responses/400BadRequest'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'      
    delete:
      tags:
        - management interview
      security:
        - authcodeWithPKCE: [admin]
      description: Delete an object with the provided ID
      parameters:
        - $ref: '#/components/parameters/ManagementId'
      responses:
        200:
          description: Object deleted sucessfully. The deleted object is returned in content.
          content:
            application/json:
              schema:
                description: The deleted object
                $ref: '#/components/schemas/ManagementInterview'
        404:
          $ref: '#/components/responses/404ObjectNotFound'
        500:
          $ref: '#/components/responses/500APIError'







#=================================================================================
#COMPONENTS=======================================================================
components:
  parameters:
    UserId:
      in: path
      name: userId
      description: Unique ID of a user
      required: true
      schema:
        type: string
        example: gjeigeajnajfsjf4d5s6d6
    RoleId:
      in: path
      name: roleId
      description: Unique ID of a role
      required: true
      schema:
        type: string
        example: opnb79wbjwebwejqw5we5w
    ProjectId:
      in: path
      name: projectId
      description: Unique ID of a project
      required: true
      schema:
        type: string
        example: onaegbnaskafkasf9dv2as
    PositionId:
      in: path
      name: positionId
      description: Unique ID of a job position
      required: true
      schema:
        type: string
        example: bi9owemwef2eweoebffogk
    CandidateId:
      in: path
      name: candidateId
      description: Unique ID of a candidate for a particular position
      required: true
      schema:
        type: string
        example: kanaogbnb5gsdv3sdv
    TechnicalId:
      in: path
      name: technicalId
      description: Unique ID of a technical interview
      required: true
      schema:
        type: string
        example: kkoavldmvaskaspv24jkj
    ManagementId:
      in: path
      name: managementId
      description: Unique ID of a management interview
      required: true
      schema:
        type: string
        example: kakakvajaqoror3p42hi
  schemas:
    User:
      type: object
      properties:
        id:
          type: string
          example: sdf2sd5sfsd6f5dfd5
        name:
          type: string
          example: John Doe
    UserNoId:
      type: object
      properties:
        name:
          type: string
          example: John Doe
    Role:
      type: object
      properties:
        id:
          type: string
          example: opnb79wbjwebwejqw5we5w
        name:
          type: string
          example: admin
    RoleNoId:
      type: object
      properties:
        name:
          type: string
          example: admin
    Project:
      type: object
      properties:
        id:
          type: string
          example: opnb79wbjwebwejqw5we5w
        name:
          type: string
          example: admin
        projectManagerId:
          type: string
          example: sdf2sd5sfsd6f5dfd5
    ProjectNoId:
      type: object
      properties:
        name:
          type: string
          example: admin
        projectManagerId:
          type: string
          example: sdf2sd5sfsd6f5dfd5
    Position:
      type: object
      properties:
        id:
          type: string
          example: opnb79wbjwebwejqw5we5w
        name:
          type: string
          example: data engineer
        recruiterId:
          type: string
          example: sdf2sd5sfsd6f5dfd5
    PositionNoId:
      type: object
      properties:
        name:
          type: string
          example: data engineer
        recruiterId:
          type: string
          example: sdf2sd5sfsd6f5dfd5
    Candidate:
      type: object
      properties:
        id:
          type: string
          example: kanaogbnb5gsdv3sdv
        userId:
          type: string
          example: gjeigeajnajfsjf4d5s6d6
        positionId:
          type: string
          example: opnb79wbjwebwejqw5we5w
    CandidateNoId:
      type: object
      properties:
        userId:
          type: string
          example: gjeigeajnajfsjf4d5s6d6
        positionId:
          type: string
          example: opnb79wbjwebwejqw5we5w
    TechnicalInterview:
      type: object
      properties:
        id:
          type: string
          example: kkoavldmvaskaspv24jkj
        candidateId:
          type: string
          example: kanaogbnb5gsdv3sdv
        positionId:
          type: string
          example: opnb79wbjwebwejqw5we5w
        score:
          type: integer
          example: 80
    TechnicalInterviewNoId:
      type: object
      properties:
        candidateId:
          type: string
          example: kanaogbnb5gsdv3sdv
        positionId:
          type: string
          example: opnb79wbjwebwejqw5we5w
        score:
          type: integer
          example: 80
    ManagementInterview:
      type: object
      properties:
        id:
          type: string
          example: kakakvajaqoror3p42hi
        candidateId:
          type: string
          example: kanaogbnb5gsdv3sdv
        positionId:
          type: string
          example: opnb79wbjwebwejqw5we5w
        score:
          type: integer
          example: 80
    ManagementInterviewNoId:
      type: object
      properties:
        candidateId:
          type: string
          example: kanaogbnb5gsdv3sdv
        positionId:
          type: string
          example: opnb79wbjwebwejqw5we5w
        score:
          type: integer
          example: 80


  responses:
    400BadRequest:
      description: Bad request. Check the content!
    404ObjectNotFound:
      description: The object with the provided ID was not found
    500APIError:
      description: Unexpected server-side error


  securitySchemes:
    authcodeWithPKCE:
      description: Authorization code flow with Proof Key for Code Exchange
      type: oauth2
      flows:
        authorizationCode:
          authorizationUrl: http://oktaxxxxxx.com/authorize
          tokenUrl: http://oktaxxxxxx.com/token
          scopes:
            admin: Allows adding new users to the system ...
            recruiter: Allows rectuiter to ...
            sourcer: Allows courcer to ...
            project_manager: Allow project manager to ...





